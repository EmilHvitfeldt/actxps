<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content='Experience studies are used by actuaries to explore historical
    experience across blocks of business and to inform assumption setting
    activities. This package provides functions for preparing data, creating 
    studies, and beginning assumption development. Experience study methods, 
    including exposure calculations, are described in: Atkinson &amp; McGarry 
    (2016) "Experience Study Calculations" 
    &lt;https://www.soa.org/49378a/globalassets/assets/files/research/experience-study-calculations.pdf&gt;.
    The limited fluctuation credibility method used by the exp_stats()
    function is described in: Herzog (1999, ISBN:1-56698-374-6) 
    "Introduction to Credibility Theory".'>
<title>Create Actuarial Experience Studies: Prepare Data, Summarize Results, and Create Reports • actxps</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Create Actuarial Experience Studies: Prepare Data, Summarize Results, and Create Reports">
<meta property="og:description" content='Experience studies are used by actuaries to explore historical
    experience across blocks of business and to inform assumption setting
    activities. This package provides functions for preparing data, creating 
    studies, and beginning assumption development. Experience study methods, 
    including exposure calculations, are described in: Atkinson &amp; McGarry 
    (2016) "Experience Study Calculations" 
    &lt;https://www.soa.org/49378a/globalassets/assets/files/research/experience-study-calculations.pdf&gt;.
    The limited fluctuation credibility method used by the exp_stats()
    function is described in: Herzog (1999, ISBN:1-56698-374-6) 
    "Introduction to Credibility Theory".'>
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">actxps</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/mattheaphy/actxps/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="actxps">actxps<a class="anchor" aria-label="anchor" href="#actxps"></a>
</h1></div>
<!-- badges: start -->

<p>Experience studies are used by actuaries to explore historical experience across blocks of business and to inform assumption setting activities. This package provides functions for preparing data, creating studies, and beginning assumption development.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of <code>actxps</code> from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"mattheaphy/actxps"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="simulated-data-set">Simulated data set<a class="anchor" aria-label="anchor" href="#simulated-data-set"></a>
</h2>
<p>The <code>actxps</code> package includes a data frame containing simulated census data for a theoretical deferred annuity product with an optional guaranteed income rider. The grain of this data is one row per policy.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mattheaphy/actxps/" class="external-link">actxps</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span></span>
<span><span class="va">census_dat</span></span>
<span><span class="co">#&gt; # A tibble: 20,000 x 10</span></span>
<span><span class="co">#&gt;    pol_num status    issue_date inc_guar qual    age product gender wd_age</span></span>
<span><span class="co">#&gt;      &lt;int&gt; &lt;fct&gt;     &lt;date&gt;     &lt;lgl&gt;    &lt;lgl&gt; &lt;int&gt; &lt;fct&gt;   &lt;fct&gt;   &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1       1 Active    2014-12-17 TRUE     FALSE    56 b       F          77</span></span>
<span><span class="co">#&gt;  2       2 Surrender 2007-09-24 FALSE    FALSE    71 a       F          71</span></span>
<span><span class="co">#&gt;  3       3 Active    2012-10-06 FALSE    TRUE     62 b       F          63</span></span>
<span><span class="co">#&gt;  4       4 Surrender 2005-06-27 TRUE     TRUE     62 c       M          62</span></span>
<span><span class="co">#&gt;  5       5 Active    2019-11-22 FALSE    FALSE    62 c       F          67</span></span>
<span><span class="co">#&gt;  6       6 Active    2018-09-01 FALSE    TRUE     77 a       F          77</span></span>
<span><span class="co">#&gt;  7       7 Active    2011-07-23 TRUE     TRUE     63 a       M          65</span></span>
<span><span class="co">#&gt;  8       8 Surrender 2005-11-08 TRUE     TRUE     58 a       M          58</span></span>
<span><span class="co">#&gt;  9       9 Active    2010-09-19 FALSE    FALSE    53 c       M          64</span></span>
<span><span class="co">#&gt; 10      10 Active    2012-05-25 TRUE     FALSE    61 b       M          73</span></span>
<span><span class="co">#&gt; # ... with 19,990 more rows, and 1 more variable: term_date &lt;date&gt;</span></span></code></pre></div>
<p>The data includes 3 policy statuses: Active, Death, and Surrender.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">status_counts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html" class="external-link">table</a></span><span class="op">(</span><span class="va">census_dat</span><span class="op">$</span><span class="va">status</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    Active     Death Surrender </span></span>
<span><span class="co">#&gt;     15195      1860      2945</span></span></code></pre></div>
<p>Let’s assume we’re interested in calculating the probability of surrender over one policy year. We cannot simply calculate the proportion of policies in a surrendered status as this does not represent an annualized surrender rate.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html" class="external-link">prop.table</a></span><span class="op">(</span><span class="va">status_counts</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    Active     Death Surrender </span></span>
<span><span class="co">#&gt;   0.75975   0.09300   0.14725</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creating-exposed-data">Creating exposed data<a class="anchor" aria-label="anchor" href="#creating-exposed-data"></a>
</h2>
<p>In order to calculate annual surrender rates, we need to break each policy into multiple records. There should be one row per policy per year.</p>
<p>The <code>expose_</code> family of functions is used to perform this transformation.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">exposed_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/expose.html">expose</a></span><span class="op">(</span><span class="va">census_dat</span>, end_date <span class="op">=</span> <span class="st">"2019-12-31"</span>, </span>
<span>                        target_status <span class="op">=</span> <span class="st">"Surrender"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">exposed_data</span></span>
<span><span class="co">#&gt; Exposure data</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Exposure type: policy_year </span></span>
<span><span class="co">#&gt;  Target status: Surrender </span></span>
<span><span class="co">#&gt;  Study range: 1900-01-01 to 2019-12-31 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; # A tibble: 141,297 x 13</span></span>
<span><span class="co">#&gt;    pol_num status issue_date inc_guar qual    age product gender wd_age</span></span>
<span><span class="co">#&gt;  *   &lt;int&gt; &lt;fct&gt;  &lt;date&gt;     &lt;lgl&gt;    &lt;lgl&gt; &lt;int&gt; &lt;fct&gt;   &lt;fct&gt;   &lt;int&gt;</span></span>
<span><span class="co">#&gt;  1       1 Active 2014-12-17 TRUE     FALSE    56 b       F          77</span></span>
<span><span class="co">#&gt;  2       1 Active 2014-12-17 TRUE     FALSE    56 b       F          77</span></span>
<span><span class="co">#&gt;  3       1 Active 2014-12-17 TRUE     FALSE    56 b       F          77</span></span>
<span><span class="co">#&gt;  4       1 Active 2014-12-17 TRUE     FALSE    56 b       F          77</span></span>
<span><span class="co">#&gt;  5       1 Active 2014-12-17 TRUE     FALSE    56 b       F          77</span></span>
<span><span class="co">#&gt;  6       1 Active 2014-12-17 TRUE     FALSE    56 b       F          77</span></span>
<span><span class="co">#&gt;  7       2 Active 2007-09-24 FALSE    FALSE    71 a       F          71</span></span>
<span><span class="co">#&gt;  8       2 Active 2007-09-24 FALSE    FALSE    71 a       F          71</span></span>
<span><span class="co">#&gt;  9       2 Active 2007-09-24 FALSE    FALSE    71 a       F          71</span></span>
<span><span class="co">#&gt; 10       2 Active 2007-09-24 FALSE    FALSE    71 a       F          71</span></span>
<span><span class="co">#&gt; # ... with 141,287 more rows, and 4 more variables: term_date &lt;date&gt;,</span></span>
<span><span class="co">#&gt; #   pol_yr &lt;int&gt;, pol_date_yr &lt;date&gt;, exposure &lt;dbl&gt;</span></span></code></pre></div>
<p>Now that the data has been “exposed” by policy year, the observed annual surrender probability can be calculated as:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">exposed_data</span><span class="op">$</span><span class="va">status</span> <span class="op">==</span> <span class="st">"Surrender"</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">exposed_data</span><span class="op">$</span><span class="va">exposure</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.02145196</span></span></code></pre></div>
<p>As a default, the <code>expose</code> function calculate exposures by policy year. This can also be accomplished with the function <code>expose_py</code>. Other implementations of <code>expose</code> include:</p>
<ul>
<li>
<code>expose_cy</code> = exposures by calendar year</li>
<li>
<code>expose_cq</code> = exposures by calendar quarter</li>
<li>
<code>expose_pm</code> = exposures by policy month</li>
<li>
<code>expose_cm</code> = exposures by calendar month</li>
</ul>
<p>All <code>expose_</code> functions return <code>exposed_df</code> objects.</p>
</div>
<div class="section level2">
<h2 id="experience-study-summary-function">Experience study summary function<a class="anchor" aria-label="anchor" href="#experience-study-summary-function"></a>
</h2>
<p>The <code>exp_stats</code> function creates a summary of observed experience data. The output of this function is an <code>exp_df</code> object.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/exp_stats.html">exp_stats</a></span><span class="op">(</span><span class="va">exposed_data</span><span class="op">)</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups:  </span></span>
<span><span class="co">#&gt;  Target status: Surrender </span></span>
<span><span class="co">#&gt;  Study range: 1900-01-01 to 2019-12-31 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; # A tibble: 1 x 4</span></span>
<span><span class="co">#&gt;   n_claims claims exposure  q_obs</span></span>
<span><span class="co">#&gt; *    &lt;int&gt;  &lt;int&gt;    &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1     2846   2846  132669. 0.0215</span></span></code></pre></div>
<div class="section level3">
<h3 id="grouped-experience-data">Grouped experience data<a class="anchor" aria-label="anchor" href="#grouped-experience-data"></a>
</h3>
<p>If the data frame passed into <code>exp_stats</code> is grouped, the resulting output will contain one record for each unique group.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">exp_res</span> <span class="op">&lt;-</span> <span class="va">exposed_data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">pol_yr</span>, <span class="va">inc_guar</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/exp_stats.html">exp_stats</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">exp_res</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups: pol_yr, inc_guar </span></span>
<span><span class="co">#&gt;  Target status: Surrender </span></span>
<span><span class="co">#&gt;  Study range: 1900-01-01 to 2019-12-31 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; # A tibble: 30 x 6</span></span>
<span><span class="co">#&gt;    pol_yr inc_guar n_claims claims exposure   q_obs</span></span>
<span><span class="co">#&gt;  *  &lt;int&gt; &lt;lgl&gt;       &lt;int&gt;  &lt;int&gt;    &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1      1 FALSE          42     42    7719. 0.00544</span></span>
<span><span class="co">#&gt;  2      1 TRUE           38     38   11526. 0.00330</span></span>
<span><span class="co">#&gt;  3      2 FALSE          65     65    7117. 0.00913</span></span>
<span><span class="co">#&gt;  4      2 TRUE           61     61   10605. 0.00575</span></span>
<span><span class="co">#&gt;  5      3 FALSE          67     67    6476. 0.0103 </span></span>
<span><span class="co">#&gt;  6      3 TRUE           60     60    9626. 0.00623</span></span>
<span><span class="co">#&gt;  7      4 FALSE         103    103    5823. 0.0177 </span></span>
<span><span class="co">#&gt;  8      4 TRUE           58     58    8697. 0.00667</span></span>
<span><span class="co">#&gt;  9      5 FALSE          94     94    5147. 0.0183 </span></span>
<span><span class="co">#&gt; 10      5 TRUE           72     72    7779. 0.00926</span></span>
<span><span class="co">#&gt; # ... with 20 more rows</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="actual-to-expected-rates">Actual-to-expected rates<a class="anchor" aria-label="anchor" href="#actual-to-expected-rates"></a>
</h3>
<p>To derive actual-to-expected rates, first attach one or more columns of expected termination rates to the exposure data. Then, pass these column names to the <code>expected</code> argument of <code>exp_stats</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">expected_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">0.005</span>, <span class="fl">0.03</span>, length.out <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>, <span class="fl">0.2</span>, <span class="fl">0.15</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0.05</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">exposed_data</span> <span class="op">&lt;-</span> <span class="va">exposed_data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>expected_1 <span class="op">=</span> <span class="va">expected_table</span><span class="op">[</span><span class="va">pol_yr</span><span class="op">]</span>,</span>
<span>         expected_2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">exposed_data</span><span class="op">$</span><span class="va">inc_guar</span>, <span class="fl">0.015</span>, <span class="fl">0.03</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">exp_res</span> <span class="op">&lt;-</span> <span class="va">exposed_data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">pol_yr</span>, <span class="va">inc_guar</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/exp_stats.html">exp_stats</a></span><span class="op">(</span>expected <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"expected_1"</span>, <span class="st">"expected_2"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">exp_res</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups: pol_yr, inc_guar </span></span>
<span><span class="co">#&gt;  Target status: Surrender </span></span>
<span><span class="co">#&gt;  Study range: 1900-01-01 to 2019-12-31 </span></span>
<span><span class="co">#&gt;  Expected values: expected_1, expected_2 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; # A tibble: 30 x 10</span></span>
<span><span class="co">#&gt;    pol_yr inc_guar n_claims claims exposure   q_obs expected_1 expected_2</span></span>
<span><span class="co">#&gt;  *  &lt;int&gt; &lt;lgl&gt;       &lt;int&gt;  &lt;int&gt;    &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1      1 FALSE          42     42    7719. 0.00544    0.005        0.03 </span></span>
<span><span class="co">#&gt;  2      1 TRUE           38     38   11526. 0.00330    0.005        0.015</span></span>
<span><span class="co">#&gt;  3      2 FALSE          65     65    7117. 0.00913    0.00778      0.03 </span></span>
<span><span class="co">#&gt;  4      2 TRUE           61     61   10605. 0.00575    0.00778      0.015</span></span>
<span><span class="co">#&gt;  5      3 FALSE          67     67    6476. 0.0103     0.0106       0.03 </span></span>
<span><span class="co">#&gt;  6      3 TRUE           60     60    9626. 0.00623    0.0106       0.015</span></span>
<span><span class="co">#&gt;  7      4 FALSE         103    103    5823. 0.0177     0.0133       0.03 </span></span>
<span><span class="co">#&gt;  8      4 TRUE           58     58    8697. 0.00667    0.0133       0.015</span></span>
<span><span class="co">#&gt;  9      5 FALSE          94     94    5147. 0.0183     0.0161       0.03 </span></span>
<span><span class="co">#&gt; 10      5 TRUE           72     72    7779. 0.00926    0.0161       0.015</span></span>
<span><span class="co">#&gt; # ... with 20 more rows, and 2 more variables: ae_expected_1 &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   ae_expected_2 &lt;dbl&gt;</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="autoplot-and-autotable">
<code>autoplot()</code> and <code>autotable()</code>
<a class="anchor" aria-label="anchor" href="#autoplot-and-autotable"></a>
</h3>
<p>The <code><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot()</a></code> and <code><a href="reference/autotable.html">autotable()</a></code> functions can be used to create visualizations and summary tables.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">.colors</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"#eb15e4"</span>, <span class="st">"#7515eb"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme_get.html" class="external-link">theme_set</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_light</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">exp_res</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/autoplot.html" class="external-link">autoplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="va">.colors</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Observed Surrender Rates by Policy Year and Income Guarantee Presence"</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-9-1.png" width="100%"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/autotable.html">autotable</a></span><span class="op">(</span><span class="va">exp_res</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-11-1.png" width="100%"></p>
</div>
<div class="section level3">
<h3 id="summary">
<code>summary()</code><a class="anchor" aria-label="anchor" href="#summary"></a>
</h3>
<p>Calling the <code>summary</code> function on an <code>exp_df</code> object re-summarizes experience results. This also produces an <code>exp_df</code> object.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">exp_res</span><span class="op">)</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups:  </span></span>
<span><span class="co">#&gt;  Target status: Surrender </span></span>
<span><span class="co">#&gt;  Study range: 1900-01-01 to 2019-12-31 </span></span>
<span><span class="co">#&gt;  Expected values: expected_1, expected_2 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; # A tibble: 1 x 8</span></span>
<span><span class="co">#&gt;   n_claims claims exposure  q_obs expected_1 expected_2 ae_expected_1</span></span>
<span><span class="co">#&gt; *    &lt;int&gt;  &lt;int&gt;    &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;         &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1     2846   2846  132669. 0.0215     0.0242     0.0209         0.885</span></span>
<span><span class="co">#&gt; # ... with 1 more variable: ae_expected_2 &lt;dbl&gt;</span></span></code></pre></div>
<p>If additional variables are passed to <code>...</code>, these variables become groups in the re-summarized <code>exp_df</code> object.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">exp_res</span>, <span class="va">inc_guar</span><span class="op">)</span></span>
<span><span class="co">#&gt; Experience study results</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  Groups: inc_guar </span></span>
<span><span class="co">#&gt;  Target status: Surrender </span></span>
<span><span class="co">#&gt;  Study range: 1900-01-01 to 2019-12-31 </span></span>
<span><span class="co">#&gt;  Expected values: expected_1, expected_2 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; # A tibble: 2 x 9</span></span>
<span><span class="co">#&gt;   inc_guar n_claims claims exposure  q_obs expected_1 expected_2 ae_expected_1</span></span>
<span><span class="co">#&gt; * &lt;lgl&gt;       &lt;int&gt;  &lt;int&gt;    &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;         &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 FALSE        1615   1615   52338. 0.0309     0.0234      0.03          1.32 </span></span>
<span><span class="co">#&gt; 2 TRUE         1231   1231   80331. 0.0153     0.0248      0.015         0.619</span></span>
<span><span class="co">#&gt; # ... with 1 more variable: ae_expected_2 &lt;dbl&gt;</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="shiny-app">Shiny App<a class="anchor" aria-label="anchor" href="#shiny-app"></a>
</h2>
<p>Passing an <code>exposed_df</code> object to the <code>exp_shiny</code> function launches a shiny app that enables interactive exploration of experience data.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/exp_shiny.html">exp_shiny</a></span><span class="op">(</span><span class="va">exposed_data</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/exp_shiny.png" width="100%"></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=actxps" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/mattheaphy/actxps/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/mattheaphy/actxps/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing actxps</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Matt Heaphy <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/mattheaphy/actxps/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/mattheaphy/actxps/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Matt Heaphy.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
